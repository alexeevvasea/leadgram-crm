{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/pages/Messages.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiSearch, FiRefreshCw, FiUser, FiClock } from 'react-icons/fi';\nimport { messageService } from '../services/messageService';\nimport { clientService } from '../services/clientService';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport { formatDistanceToNow } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Messages = () => {\n  _s();\n  const navigate = useNavigate();\n  const [messages, setMessages] = useState([]);\n  const [clients, setClients] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [unreadCount, setUnreadCount] = useState(0);\n  useEffect(() => {\n    loadMessagesData();\n    loadUnreadCount();\n  }, []);\n  const loadMessagesData = async () => {\n    try {\n      setLoading(true);\n      const messagesData = await messageService.getRecentMessages(100);\n      setMessages(messagesData);\n\n      // Получаем информацию о клиентах\n      const clientIds = [...new Set(messagesData.map(m => m.client_id))];\n      const clientsData = {};\n      for (const clientId of clientIds) {\n        try {\n          const client = await clientService.getClient(clientId);\n          clientsData[clientId] = client;\n        } catch (err) {\n          console.error(`Error loading client ${clientId}:`, err);\n        }\n      }\n      setClients(clientsData);\n    } catch (err) {\n      console.error('Error loading messages:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadUnreadCount = async () => {\n    try {\n      const data = await messageService.getUnreadCount();\n      setUnreadCount(data.unread_count);\n    } catch (err) {\n      console.error('Error loading unread count:', err);\n    }\n  };\n  const handleSearchMessages = async () => {\n    if (!searchQuery.trim()) {\n      loadMessagesData();\n      return;\n    }\n    try {\n      setLoading(true);\n      const searchResults = await messageService.searchMessages(searchQuery);\n      setMessages(searchResults);\n    } catch (err) {\n      console.error('Error searching messages:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleMessageClick = message => {\n    navigate(`/chat/${message.client_id}`);\n  };\n  const getSourceColor = source => {\n    switch (source) {\n      case 'telegram':\n        return 'bg-blue-500';\n      case 'whatsapp':\n        return 'bg-green-500';\n      case 'olx':\n        return 'bg-purple-500';\n      default:\n        return 'bg-gray-500';\n    }\n  };\n  const groupedMessages = messages.reduce((groups, message) => {\n    const clientId = message.client_id;\n    if (!groups[clientId]) {\n      groups[clientId] = [];\n    }\n    groups[clientId].push(message);\n    return groups;\n  }, {});\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      text: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-900\",\n          children: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 mt-1\",\n          children: [unreadCount, \" \\u043D\\u0435\\u043F\\u0440\\u043E\\u0447\\u0438\\u0442\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadMessagesData,\n        className: \"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(FiRefreshCw, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(FiSearch, {\n            className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\\u043C...\",\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value),\n            onKeyPress: e => e.key === 'Enter' && handleSearchMessages(),\n            className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSearchMessages,\n          className: \"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n          children: \"\\u041D\\u0430\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: Object.keys(groupedMessages).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n          children: /*#__PURE__*/_jsxDEV(FiUser, {\n            className: \"w-8 h-8 text-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this) : Object.entries(groupedMessages).map(([clientId, clientMessages]) => {\n        const client = clients[clientId];\n        const lastMessage = clientMessages[0]; // Сообщения уже отсортированы по времени\n\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => handleMessageClick(lastMessage),\n          className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start space-x-3 flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center\",\n                  children: /*#__PURE__*/_jsxDEV(FiUser, {\n                    className: \"w-6 h-6 text-gray-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2 mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"font-medium text-gray-900 truncate\",\n                    children: (client === null || client === void 0 ? void 0 : client.name) || 'Неизвестный клиент'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `w-3 h-3 rounded-full ${getSourceColor(lastMessage.source)}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 23\n                }, this), (client === null || client === void 0 ? void 0 : client.listing_title) && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500 truncate mb-1\",\n                  children: [\"\\uD83D\\uDCCB \", client.listing_title]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600 truncate\",\n                  children: [lastMessage.message_type === 'incoming' ? '' : 'Вы: ', lastMessage.content]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4 mt-2 text-xs text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-1\",\n                    children: [/*#__PURE__*/_jsxDEV(FiClock, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: formatDistanceToNow(new Date(lastMessage.timestamp), {\n                        addSuffix: true,\n                        locale: ru\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [clientMessages.length, \" \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-end space-y-2\",\n              children: [!lastMessage.is_read && lastMessage.message_type === 'incoming' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-blue-500 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 23\n              }, this), clientMessages.filter(m => m.message_type === 'incoming' && !m.is_read).length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",\n                children: clientMessages.filter(m => m.message_type === 'incoming' && !m.is_read).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 17\n          }, this)\n        }, clientId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(Messages, \"jaLCv++fn+rkTumk+R0dps1i6nI=\", false, function () {\n  return [useNavigate];\n});\n_c = Messages;\nexport default Messages;\nvar _c;\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","FiSearch","FiRefreshCw","FiUser","FiClock","messageService","clientService","LoadingSpinner","formatDistanceToNow","ru","jsxDEV","_jsxDEV","Messages","_s","navigate","messages","setMessages","clients","setClients","loading","setLoading","searchQuery","setSearchQuery","unreadCount","setUnreadCount","loadMessagesData","loadUnreadCount","messagesData","getRecentMessages","clientIds","Set","map","m","client_id","clientsData","clientId","client","getClient","err","console","error","data","getUnreadCount","unread_count","handleSearchMessages","trim","searchResults","searchMessages","handleMessageClick","message","getSourceColor","source","groupedMessages","reduce","groups","push","text","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","type","placeholder","value","onChange","e","target","onKeyPress","key","Object","keys","length","entries","clientMessages","lastMessage","name","listing_title","message_type","content","Date","timestamp","addSuffix","locale","is_read","filter","_c","$RefreshReg$"],"sources":["/app/frontend/src/pages/Messages.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiSearch, FiRefreshCw, FiUser, FiClock } from 'react-icons/fi';\nimport { messageService } from '../services/messageService';\nimport { clientService } from '../services/clientService';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport { formatDistanceToNow } from 'date-fns';\nimport { ru } from 'date-fns/locale';\n\nconst Messages = () => {\n  const navigate = useNavigate();\n  const [messages, setMessages] = useState([]);\n  const [clients, setClients] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  useEffect(() => {\n    loadMessagesData();\n    loadUnreadCount();\n  }, []);\n\n  const loadMessagesData = async () => {\n    try {\n      setLoading(true);\n      const messagesData = await messageService.getRecentMessages(100);\n      setMessages(messagesData);\n      \n      // Получаем информацию о клиентах\n      const clientIds = [...new Set(messagesData.map(m => m.client_id))];\n      const clientsData = {};\n      \n      for (const clientId of clientIds) {\n        try {\n          const client = await clientService.getClient(clientId);\n          clientsData[clientId] = client;\n        } catch (err) {\n          console.error(`Error loading client ${clientId}:`, err);\n        }\n      }\n      \n      setClients(clientsData);\n    } catch (err) {\n      console.error('Error loading messages:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadUnreadCount = async () => {\n    try {\n      const data = await messageService.getUnreadCount();\n      setUnreadCount(data.unread_count);\n    } catch (err) {\n      console.error('Error loading unread count:', err);\n    }\n  };\n\n  const handleSearchMessages = async () => {\n    if (!searchQuery.trim()) {\n      loadMessagesData();\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const searchResults = await messageService.searchMessages(searchQuery);\n      setMessages(searchResults);\n    } catch (err) {\n      console.error('Error searching messages:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleMessageClick = (message) => {\n    navigate(`/chat/${message.client_id}`);\n  };\n\n  const getSourceColor = (source) => {\n    switch (source) {\n      case 'telegram': return 'bg-blue-500';\n      case 'whatsapp': return 'bg-green-500';\n      case 'olx': return 'bg-purple-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const groupedMessages = messages.reduce((groups, message) => {\n    const clientId = message.client_id;\n    if (!groups[clientId]) {\n      groups[clientId] = [];\n    }\n    groups[clientId].push(message);\n    return groups;\n  }, {});\n\n  if (loading) {\n    return <LoadingSpinner text=\"Загрузка сообщений...\" />;\n  }\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      {/* Заголовок */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Сообщения</h1>\n          {unreadCount > 0 && (\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {unreadCount} непрочитанных сообщений\n            </p>\n          )}\n        </div>\n        <button\n          onClick={loadMessagesData}\n          className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\n        >\n          <FiRefreshCw className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      {/* Поиск */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n        <div className=\"flex space-x-2\">\n          <div className=\"relative flex-1\">\n            <FiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder=\"Поиск по сообщениям...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleSearchMessages()}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            />\n          </div>\n          <button\n            onClick={handleSearchMessages}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Найти\n          </button>\n        </div>\n      </div>\n\n      {/* Список чатов */}\n      <div className=\"space-y-4\">\n        {Object.keys(groupedMessages).length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <FiUser className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-500\">Нет сообщений</p>\n          </div>\n        ) : (\n          Object.entries(groupedMessages).map(([clientId, clientMessages]) => {\n            const client = clients[clientId];\n            const lastMessage = clientMessages[0]; // Сообщения уже отсортированы по времени\n            \n            return (\n              <div\n                key={clientId}\n                onClick={() => handleMessageClick(lastMessage)}\n                className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start space-x-3 flex-1\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center\">\n                        <FiUser className=\"w-6 h-6 text-gray-500\" />\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center space-x-2 mb-1\">\n                        <h3 className=\"font-medium text-gray-900 truncate\">\n                          {client?.name || 'Неизвестный клиент'}\n                        </h3>\n                        <div className={`w-3 h-3 rounded-full ${getSourceColor(lastMessage.source)}`} />\n                      </div>\n                      \n                      {client?.listing_title && (\n                        <p className=\"text-sm text-gray-500 truncate mb-1\">\n                          📋 {client.listing_title}\n                        </p>\n                      )}\n                      \n                      <p className=\"text-sm text-gray-600 truncate\">\n                        {lastMessage.message_type === 'incoming' ? '' : 'Вы: '}\n                        {lastMessage.content}\n                      </p>\n                      \n                      <div className=\"flex items-center space-x-4 mt-2 text-xs text-gray-500\">\n                        <div className=\"flex items-center space-x-1\">\n                          <FiClock className=\"w-3 h-3\" />\n                          <span>\n                            {formatDistanceToNow(new Date(lastMessage.timestamp), { \n                              addSuffix: true, \n                              locale: ru \n                            })}\n                          </span>\n                        </div>\n                        <span>{clientMessages.length} сообщений</span>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex flex-col items-end space-y-2\">\n                    {!lastMessage.is_read && lastMessage.message_type === 'incoming' && (\n                      <div className=\"w-3 h-3 bg-blue-500 rounded-full\" />\n                    )}\n                    {clientMessages.filter(m => m.message_type === 'incoming' && !m.is_read).length > 0 && (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                        {clientMessages.filter(m => m.message_type === 'incoming' && !m.is_read).length}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Messages;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,EAAEC,OAAO,QAAQ,gBAAgB;AACvE,SAASC,cAAc,QAAQ,4BAA4B;AAC3D,SAASC,aAAa,QAAQ,2BAA2B;AACzD,OAAOC,cAAc,MAAM,8BAA8B;AACzD,SAASC,mBAAmB,QAAQ,UAAU;AAC9C,SAASC,EAAE,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErC,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAMC,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACmB,OAAO,EAAEC,UAAU,CAAC,GAAGpB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1C,MAAM,CAACqB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACuB,WAAW,EAAEC,cAAc,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACyB,WAAW,EAAEC,cAAc,CAAC,GAAG1B,QAAQ,CAAC,CAAC,CAAC;EAEjDC,SAAS,CAAC,MAAM;IACd0B,gBAAgB,CAAC,CAAC;IAClBC,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMD,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI;MACFL,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMO,YAAY,GAAG,MAAMtB,cAAc,CAACuB,iBAAiB,CAAC,GAAG,CAAC;MAChEZ,WAAW,CAACW,YAAY,CAAC;;MAEzB;MACA,MAAME,SAAS,GAAG,CAAC,GAAG,IAAIC,GAAG,CAACH,YAAY,CAACI,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,CAAC,CAAC,CAAC;MAClE,MAAMC,WAAW,GAAG,CAAC,CAAC;MAEtB,KAAK,MAAMC,QAAQ,IAAIN,SAAS,EAAE;QAChC,IAAI;UACF,MAAMO,MAAM,GAAG,MAAM9B,aAAa,CAAC+B,SAAS,CAACF,QAAQ,CAAC;UACtDD,WAAW,CAACC,QAAQ,CAAC,GAAGC,MAAM;QAChC,CAAC,CAAC,OAAOE,GAAG,EAAE;UACZC,OAAO,CAACC,KAAK,CAAC,wBAAwBL,QAAQ,GAAG,EAAEG,GAAG,CAAC;QACzD;MACF;MAEApB,UAAU,CAACgB,WAAW,CAAC;IACzB,CAAC,CAAC,OAAOI,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;IAC/C,CAAC,SAAS;MACRlB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMM,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF,MAAMe,IAAI,GAAG,MAAMpC,cAAc,CAACqC,cAAc,CAAC,CAAC;MAClDlB,cAAc,CAACiB,IAAI,CAACE,YAAY,CAAC;IACnC,CAAC,CAAC,OAAOL,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEF,GAAG,CAAC;IACnD;EACF,CAAC;EAED,MAAMM,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI,CAACvB,WAAW,CAACwB,IAAI,CAAC,CAAC,EAAE;MACvBpB,gBAAgB,CAAC,CAAC;MAClB;IACF;IAEA,IAAI;MACFL,UAAU,CAAC,IAAI,CAAC;MAChB,MAAM0B,aAAa,GAAG,MAAMzC,cAAc,CAAC0C,cAAc,CAAC1B,WAAW,CAAC;MACtEL,WAAW,CAAC8B,aAAa,CAAC;IAC5B,CAAC,CAAC,OAAOR,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;IACjD,CAAC,SAAS;MACRlB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM4B,kBAAkB,GAAIC,OAAO,IAAK;IACtCnC,QAAQ,CAAC,SAASmC,OAAO,CAAChB,SAAS,EAAE,CAAC;EACxC,CAAC;EAED,MAAMiB,cAAc,GAAIC,MAAM,IAAK;IACjC,QAAQA,MAAM;MACZ,KAAK,UAAU;QAAE,OAAO,aAAa;MACrC,KAAK,UAAU;QAAE,OAAO,cAAc;MACtC,KAAK,KAAK;QAAE,OAAO,eAAe;MAClC;QAAS,OAAO,aAAa;IAC/B;EACF,CAAC;EAED,MAAMC,eAAe,GAAGrC,QAAQ,CAACsC,MAAM,CAAC,CAACC,MAAM,EAAEL,OAAO,KAAK;IAC3D,MAAMd,QAAQ,GAAGc,OAAO,CAAChB,SAAS;IAClC,IAAI,CAACqB,MAAM,CAACnB,QAAQ,CAAC,EAAE;MACrBmB,MAAM,CAACnB,QAAQ,CAAC,GAAG,EAAE;IACvB;IACAmB,MAAM,CAACnB,QAAQ,CAAC,CAACoB,IAAI,CAACN,OAAO,CAAC;IAC9B,OAAOK,MAAM;EACf,CAAC,EAAE,CAAC,CAAC,CAAC;EAEN,IAAInC,OAAO,EAAE;IACX,oBAAOR,OAAA,CAACJ,cAAc;MAACiD,IAAI,EAAC;IAAuB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACxD;EAEA,oBACEjD,OAAA;IAAKkD,SAAS,EAAC,eAAe;IAAAC,QAAA,gBAE5BnD,OAAA;MAAKkD,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChDnD,OAAA;QAAAmD,QAAA,gBACEnD,OAAA;UAAIkD,SAAS,EAAC,kCAAkC;UAAAC,QAAA,EAAC;QAAS;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAC9DrC,WAAW,GAAG,CAAC,iBACdZ,OAAA;UAAGkD,SAAS,EAAC,4BAA4B;UAAAC,QAAA,GACtCvC,WAAW,EAAC,wIACf;QAAA;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CACJ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACNjD,OAAA;QACEoD,OAAO,EAAEtC,gBAAiB;QAC1BoC,SAAS,EAAC,sEAAsE;QAAAC,QAAA,eAEhFnD,OAAA,CAACT,WAAW;UAAC2D,SAAS,EAAC;QAAS;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7B,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGNjD,OAAA;MAAKkD,SAAS,EAAC,0DAA0D;MAAAC,QAAA,eACvEnD,OAAA;QAAKkD,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BnD,OAAA;UAAKkD,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9BnD,OAAA,CAACV,QAAQ;YAAC4D,SAAS,EAAC;UAA0E;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACjGjD,OAAA;YACEqD,IAAI,EAAC,MAAM;YACXC,WAAW,EAAC,6GAAwB;YACpCC,KAAK,EAAE7C,WAAY;YACnB8C,QAAQ,EAAGC,CAAC,IAAK9C,cAAc,CAAC8C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAChDI,UAAU,EAAGF,CAAC,IAAKA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAI3B,oBAAoB,CAAC,CAAE;YAC/DiB,SAAS,EAAC;UAAiH;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5H,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACNjD,OAAA;UACEoD,OAAO,EAAEnB,oBAAqB;UAC9BiB,SAAS,EAAC,iFAAiF;UAAAC,QAAA,EAC5F;QAED;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNjD,OAAA;MAAKkD,SAAS,EAAC,WAAW;MAAAC,QAAA,EACvBU,MAAM,CAACC,IAAI,CAACrB,eAAe,CAAC,CAACsB,MAAM,KAAK,CAAC,gBACxC/D,OAAA;QAAKkD,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAChCnD,OAAA;UAAKkD,SAAS,EAAC,kFAAkF;UAAAC,QAAA,eAC/FnD,OAAA,CAACR,MAAM;YAAC0D,SAAS,EAAC;UAAuB;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzC,CAAC,eACNjD,OAAA;UAAGkD,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAC;QAAa;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C,CAAC,GAENY,MAAM,CAACG,OAAO,CAACvB,eAAe,CAAC,CAACrB,GAAG,CAAC,CAAC,CAACI,QAAQ,EAAEyC,cAAc,CAAC,KAAK;QAClE,MAAMxC,MAAM,GAAGnB,OAAO,CAACkB,QAAQ,CAAC;QAChC,MAAM0C,WAAW,GAAGD,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEvC,oBACEjE,OAAA;UAEEoD,OAAO,EAAEA,CAAA,KAAMf,kBAAkB,CAAC6B,WAAW,CAAE;UAC/ChB,SAAS,EAAC,2GAA2G;UAAAC,QAAA,eAErHnD,OAAA;YAAKkD,SAAS,EAAC,kCAAkC;YAAAC,QAAA,gBAC/CnD,OAAA;cAAKkD,SAAS,EAAC,mCAAmC;cAAAC,QAAA,gBAChDnD,OAAA;gBAAKkD,SAAS,EAAC,eAAe;gBAAAC,QAAA,eAC5BnD,OAAA;kBAAKkD,SAAS,EAAC,qEAAqE;kBAAAC,QAAA,eAClFnD,OAAA,CAACR,MAAM;oBAAC0D,SAAS,EAAC;kBAAuB;oBAAAJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAENjD,OAAA;gBAAKkD,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,gBAC7BnD,OAAA;kBAAKkD,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,gBAC/CnD,OAAA;oBAAIkD,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAC/C,CAAA1B,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAE0C,IAAI,KAAI;kBAAoB;oBAAArB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnC,CAAC,eACLjD,OAAA;oBAAKkD,SAAS,EAAE,wBAAwBX,cAAc,CAAC2B,WAAW,CAAC1B,MAAM,CAAC;kBAAG;oBAAAM,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7E,CAAC,EAEL,CAAAxB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAE2C,aAAa,kBACpBpE,OAAA;kBAAGkD,SAAS,EAAC,qCAAqC;kBAAAC,QAAA,GAAC,eAC9C,EAAC1B,MAAM,CAAC2C,aAAa;gBAAA;kBAAAtB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CACJ,eAEDjD,OAAA;kBAAGkD,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,GAC1Ce,WAAW,CAACG,YAAY,KAAK,UAAU,GAAG,EAAE,GAAG,MAAM,EACrDH,WAAW,CAACI,OAAO;gBAAA;kBAAAxB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnB,CAAC,eAEJjD,OAAA;kBAAKkD,SAAS,EAAC,wDAAwD;kBAAAC,QAAA,gBACrEnD,OAAA;oBAAKkD,SAAS,EAAC,6BAA6B;oBAAAC,QAAA,gBAC1CnD,OAAA,CAACP,OAAO;sBAACyD,SAAS,EAAC;oBAAS;sBAAAJ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAC/BjD,OAAA;sBAAAmD,QAAA,EACGtD,mBAAmB,CAAC,IAAI0E,IAAI,CAACL,WAAW,CAACM,SAAS,CAAC,EAAE;wBACpDC,SAAS,EAAE,IAAI;wBACfC,MAAM,EAAE5E;sBACV,CAAC;oBAAC;sBAAAgD,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC,eACNjD,OAAA;oBAAAmD,QAAA,GAAOc,cAAc,CAACF,MAAM,EAAC,yDAAU;kBAAA;oBAAAjB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAENjD,OAAA;cAAKkD,SAAS,EAAC,mCAAmC;cAAAC,QAAA,GAC/C,CAACe,WAAW,CAACS,OAAO,IAAIT,WAAW,CAACG,YAAY,KAAK,UAAU,iBAC9DrE,OAAA;gBAAKkD,SAAS,EAAC;cAAkC;gBAAAJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CACpD,EACAgB,cAAc,CAACW,MAAM,CAACvD,CAAC,IAAIA,CAAC,CAACgD,YAAY,KAAK,UAAU,IAAI,CAAChD,CAAC,CAACsD,OAAO,CAAC,CAACZ,MAAM,GAAG,CAAC,iBACjF/D,OAAA;gBAAMkD,SAAS,EAAC,+FAA+F;gBAAAC,QAAA,EAC5Gc,cAAc,CAACW,MAAM,CAACvD,CAAC,IAAIA,CAAC,CAACgD,YAAY,KAAK,UAAU,IAAI,CAAChD,CAAC,CAACsD,OAAO,CAAC,CAACZ;cAAM;gBAAAjB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3E,CACP;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC,GAxDDzB,QAAQ;UAAAsB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAyDV,CAAC;MAEV,CAAC;IACF;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC/C,EAAA,CAvNID,QAAQ;EAAA,QACKZ,WAAW;AAAA;AAAAwF,EAAA,GADxB5E,QAAQ;AAyNd,eAAeA,QAAQ;AAAC,IAAA4E,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}